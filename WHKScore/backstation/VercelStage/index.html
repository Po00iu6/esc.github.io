<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <link href="https://ys.mihoyo.com/main/favicon.ico" rel="icon" type="image/x-icon" />
    <link href="https://ys.mihoyo.com/main/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta
        content="https://fastcdn.mihoyo.com/static-resource-v2/2023/12/20/e04bc0be964b4fc7056bc1128b35f200_4546122273706382871.png"
        property="og:image" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>考试成绩查询与分析</title>
    <!-- 引入Chart.js库 -->
    <script src="./chart.js"></script>
    <!-- 引入背景动画样式 -->
    <link rel="stylesheet" href="../background-animation.css">
    <!-- 引入自定义样式 -->
    <link rel="stylesheet" href="verclestyle.css">
</head>
<body>
    <!-- 音乐开关 -->
    <div class="music-toggle-container">
        <span class="music-label">BGM</span>
        <label class="toggle-switch">
            <input type="checkbox" id="music-toggle">
            <span class="toggle-slider"></span>
        </label>
    </div>
    
    <!-- 音乐播放通知标签 -->
    <div class="music-notification" id="music-notification">
        <img class="music-thumbnail" id="music-thumbnail" src="" alt="Music Thumbnail" style="display: none;">
        <div class="music-icon" id="music-icon">🎵</div>
        <div class="close-notification" id="close-notification">^</div>
    </div>
    
    <div class="container">
        <h1>考试成绩查询与分析</h1>
        
        <div class="info">
            <p>正在从 <b>http://cjcx.sqshmzx.net/g3/</b> 获取成绩数据...</p>
        </div>
        
        <div class="status" id="status">正在加载成绩数据，请稍候...</div>
        
        <div class="chart-container">
            <canvas id="scoreChart"></canvas>
        </div>
    </div>
    
    <!-- 雷达图容器 -->
    <div class="container">
        <h1>最近一次考试成绩雷达图</h1>
        <div class="chart-container" style="width: 400px; height: 400px; margin: 0 auto;">
            <canvas id="hexagonChart"></canvas>
        </div>
    </div>
    
    <!-- 成绩升降分析容器 -->
    <div class="container">
        <h1>成绩升降分析</h1>
        <div style="background-color: rgba(0, 0, 0, 0.5); padding: 20px; border-radius: 10px; margin: 20px 0;">
            <div id="progress-details"></div>
        </div>
    </div>
    
    <!-- 引入Grades.js - 优先加载 -->
    <script src="Grades.js"></script>
    <!-- 引入音乐控制脚本 - 延迟加载 -->
    <script src="volume.js" defer></script>
    
    <!-- 网页说明区域 -->
    <div class="container">
        <div class="learn-more" onclick="showExplanation()">关于此网页</div>
        <div id="explanation">
            <p>此网页用于自动获取和分析考试成绩数据，主要功能包括：</p>
            <ul>
                <li>自动从学校成绩查询系统获取考试成绩</li>
                <li>绘制成绩曲线图表，展示成绩变化趋势</li>
                <li>生成最近一次考试成绩的雷达图，直观展示各科成绩分布</li>
                <li>分析成绩升降情况，显示总分和各科的进步或退步</li>
                <li>支持动态数据获取和备选数据切换</li>
                <li>使用现代化的设计和交互效果</li>
            </ul>
            <p>数据更新频率：每次打开页面时自动获取最新数据</p>
            <p>技术栈：HTML5、CSS3、JavaScript、Chart.js</p>
            <p>本网页基本可以确定，如果没有程序员知道这个页面，你的隐私就是安全的。这个页面通常只有我和你知道，因此其他人是不会发现的。并且我没有在明面上泄露你的任何个人信息，一般普通学生无法获取你的个人信息，除非是程序员。当然，就算泄露，也没有任何影响。</p>
            <p>想回到上一个页面？点击<a href="../discipline.html" style="color: #58A6FF;">这里</a></p>
        </div>
    </div>
    
    <script>
        // 显示/隐藏说明
        function showExplanation() {
            const explanation = document.getElementById('explanation');
            // 使用更可靠的方式检查元素是否可见
            const isVisible = explanation.offsetHeight > 0 || explanation.offsetWidth > 0;
            explanation.style.display = isVisible ? 'none' : 'block';
        }
    </script>
</body>
</html>
